<div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
        <div class="x_title">
            <h2>Features overview</h2>
            <ul class="nav navbar-right panel_toolbox">
                <li>
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </li>
            </ul>
            <div class="clearfix"></div>
        </div>

        <div class="x_content">
            <div class="table-responsive">
                <table id="features-table" class="table table-striped table-bordered dt-responsive nowrap"
                       cellspacing="0"
                       width="100%">
                    <thead>
                    <tr>
                        <th>Feature name</th>
                        <th><i class="fa fa-tags fa-lg" title="Tags"></i></th>
                        <th>Status</th>
                        <% suite.features[0].metadata.forEach(function(metadatum, metadatumIndex) { %>
                            <th><%= metadatum.name %></th>
                        <% }); %>
                        <% if (suite.displayDuration) { %>
                            <th>Duration</th>
                        <% } %>
                        <th>Total</th>
                        <th>Passed</th>
                        <th>Failed</th>
                        <% if(+suite.totalScenariosCount.pending.count > 0) { %>
                            <th>Pending</th>
                        <% } %>
                        <% if(+suite.totalScenariosCount.skipped.count > 0) { %>
                            <th>Skip</th>
                        <% } %>
                        <% if(+suite.totalScenariosCount.notDefined.count > 0) { %>
                            <th>Undefined</th>
                        <% } %>
                        <% if(+suite.totalScenariosCount.ambiguous.count > 0) { %>
                            <th>Ambiguous</th>
                        <% } %>
                    </tr>
                    </thead>

                    <tbody>
                    <% suite.features.forEach(function(feature, featureIndex) { %>
                        <tr>
                            <td>
                                <a href="features/<%= feature.id %>.html"><%= feature.name %></a>
                            </td>
                            <td class="text-center">
                                <% if (feature.tags) { %>
                                    <% var amount = feature.tags.length; %>
                                    <% var tags = feature.tags.reduce((tags, tag) => tags + tag.name + ' ', ''); %>
                                    <% if (amount > 0 ){ %>
                                        <i class="fa fa-tag<% if(amount > 1 ) { %>s<% } %> fa-lg" data-toggle="tooltip"
                                           data-placement="top"
                                           title="<%= tags.trim() %>">
                                            <span><%= tags.trim() %></span>
                                        </i>
                                    <% } %>
                                <% } %>
                            </td>
                            <td class="text-center">
                                <% var statusIcon; %>
                                <% var status; %>
                                <% if (feature.isFailed) { %>
                                    <% status = 'Failed'; %>
                                    <% statusIcon = 'exclamation-circle failed-color'; %>
                                <% } else if (feature.isAmbiguous) { %>
                                    <% status = 'Ambiguous'; %>
                                    <% statusIcon = 'flash ambiguous-color'; %>
                                <% } else if (feature.isNotdefined) { %>
                                    <% status = 'Not Defined'; %>
                                    <% statusIcon = 'question-circle not-defined-color'; %>
                                <% } else if (feature.isNotdefined) { %>
                                    <% status = 'Pending'; %>
                                    <% statusIcon = 'minus-circle pending-color'; %>
                                <% } else if (feature.isSkipped) { %>
                                    <% status = 'Skipped'; %>
                                    <% statusIcon = 'arrow-circle-right skipped-color'; %>
                                <% } else { %>
                                    <% status = 'Passed'; %>
                                    <% statusIcon = 'check-circle passed-color'; %>
                                <% } %>
                                <i class="fa fa-<%= statusIcon %> fa-lg" data-toggle="tooltip" data-placement="top"
                                   title="<%= status %>">
                                    <span><%= statusIcon %></span>
                                </i>
                            </td>
                            <% Array.isArray(feature.metadata) && feature.metadata.forEach(function(metadatum, metadatumIndex) { %>
                                <td>
                                    <%= metadatum.value %>
                                </td>
                            <% }); %>
                            <% if (suite.displayDuration) { %>
                                <td><%= feature.time %></td>
                            <% } %>
                            <td><%= feature.totalFeatureScenariosCount.total %></td>
                            <td><%= feature.totalFeatureScenariosCount.passed.count %></td>
                            <td><%= feature.totalFeatureScenariosCount.failed.count %></td>
                            <% if(+suite.totalScenariosCount.skipped.count > 0) { %>
                                <td><%= feature.totalFeatureScenariosCount.skipped.count %></td>
                            <% } %>
                            <% if(+suite.totalScenariosCount.pending.count > 0) { %>
                                <td><%= feature.totalFeatureScenariosCount.pending.count %></td>
                            <% } %>
                            <% if(+suite.totalScenariosCount.notDefined.count > 0) { %>
                                <td><%= feature.totalFeatureScenariosCount.notDefined.count %></td>
                            <% } %>
                            <% if(+suite.totalScenariosCount.ambiguous.count > 0) { %>
                                <td><%= feature.totalFeatureScenariosCount.ambiguous.count %></td>
                            <% } %>
                        </tr>
                    <% }); %>
                    </tbody>

                </table>
            </div>
        </div>
    </div>
</div>
